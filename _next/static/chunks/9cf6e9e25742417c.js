(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42416,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(74080);class o{static BASE_URL="https://developer-lostark.game.onstove.com";static async getMarketPrice(e,t,r,a){try{console.log(`[API] Searching for ${r} (Category: ${a})...`);let o=await fetch(`${this.BASE_URL}/markets/items`,{method:"POST",headers:{Authorization:`bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({Sort:"CURRENT_MIN_PRICE",CategoryCode:a,ItemName:r,PageNo:1,SortCondition:"ASC"})});if(!o.ok)throw Error(`API Error: ${o.status}`);let s=await o.json();console.log(`[API] Response for ${r}:`,s);let l=s.Items||[],n=l.find(e=>e.Id===t)||l[0];if(n)return console.log("[API] Found item:",n),{price:n.CurrentMinPrice||n.RecentPrice||0,bundleCount:n.BundleCount||1};return null}catch(e){throw e}}static async searchItems(e,t){try{let r=await fetch(`${this.BASE_URL}/markets/items`,{method:"POST",headers:{Authorization:`bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({Sort:"GRADE",CategoryCode:5e4,ItemName:t,PageNo:1,SortCondition:"ASC"})});if(!r.ok){let r=await fetch(`${this.BASE_URL}/markets/items`,{method:"POST",headers:{Authorization:`bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({Sort:"GRADE",ItemName:t,PageNo:1,SortCondition:"ASC"})});if(!r.ok)throw Error(`Search Error: ${r.status}`);return await r.json()}return await r.json()}catch(e){throw console.error("Search failed:",e),e}}}let s={name:"Î™©Ïû¨",id:6882301,categoryCode:90300},l={name:"Î∂ÄÎìúÎü¨Ïö¥ Î™©Ïû¨",id:6882304,categoryCode:90300},n={name:"ÏïÑÎπÑÎèÑÏä§ Î™©Ïû¨",id:6884308,categoryCode:90300},i={name:"ÏïÑÎπÑÎèÑÏä§ ÏúµÌôî Ïû¨Î£å",id:6861012,categoryCode:50010},c={name:"ÏÉÅÍ∏â ÏïÑÎπÑÎèÑÏä§ ÏúµÌôî Ïû¨Î£å",id:6861013,categoryCode:50010};function d({className:e=""}){return(0,t.jsxs)("div",{className:`w-80 bg-[var(--bg-panel)]/90 backdrop-blur-md border border-[var(--border-color)] rounded-xl p-4 shadow-2xl flex flex-col gap-4 ${e}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-[var(--border-color)] pb-2",children:[(0,t.jsx)("h3",{className:"text-xs font-bold text-[var(--color-primary)] uppercase tracking-widest",children:"ÏÑ§Ï†ï Í∞ÄÏù¥Îìú ÏòàÏãú"}),(0,t.jsx)("span",{className:"text-[10px] text-[var(--text-secondary)]",children:"Î°úÎÇòÏö¥Ïùò Í≥†ÏÑú"})]}),(0,t.jsx)("div",{className:"relative rounded-lg overflow-hidden border border-[var(--border-color)] group",children:(0,t.jsx)("img",{src:"/images/guide_ronaun.png",alt:"Bonus Guide Example",className:"w-full h-auto object-cover opacity-90 group-hover:opacity-100 transition-opacity"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs bg-white/5 p-2 rounded-lg",children:[(0,t.jsx)("span",{className:"text-[var(--text-secondary)] font-medium",children:"Ï†úÏûë ÏàòÏàòÎ£å Í∞êÏÜå"}),(0,t.jsx)("span",{className:"text-[var(--color-accent)] font-bold",children:"16%"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs bg-white/5 p-2 rounded-lg",children:[(0,t.jsx)("span",{className:"text-[var(--text-secondary)] font-medium",children:"ÎåÄÏÑ±Í≥µ ÌôïÎ•†"}),(0,t.jsx)("span",{className:"text-[var(--color-accent)] font-bold",children:"7%"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs bg-white/5 p-2 rounded-lg",children:[(0,t.jsx)("span",{className:"text-[var(--text-secondary)] font-medium",children:"Ï†úÏûë ÏãúÍ∞Ñ Í∞êÏÜå"}),(0,t.jsx)("span",{className:"text-[var(--color-accent)] font-bold",children:"13%"})]})]}),(0,t.jsxs)("p",{className:"text-[10px] text-[var(--text-secondary)] text-center leading-relaxed opacity-70",children:["* ÏúÑ ÏòàÏãúÏ≤òÎüº Î™®Îì† Ìö®Í≥ºÎ•º ",(0,t.jsx)("strong",{children:"Ìï©ÏÇ∞"}),"ÌïòÏó¨ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.",(0,t.jsx)("br",{}),"(ÎãàÎÇòÎ∏åÏùò Ï∂ïÎ≥µÏùÄ Î≥ÑÎèÑ Ï≤¥ÌÅ¨)"]})]})}function x({costReduction:e,setCostReduction:a,greatSuccessChance:o,setGreatSuccessChance:s,ninavBlessing:l,setNinavBlessing:n,timeReduction:i,setTimeReduction:c,className:x="fixed top-6 left-6 z-50 flex flex-col items-start pointer-events-none",forceExpanded:p=!1}){let[m,b]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),g=m||p;return(0,t.jsxs)("div",{className:x,children:[!p&&(0,t.jsx)("button",{onClick:()=>b(!m),className:"pointer-events-auto px-4 py-2 bg-[var(--bg-panel)] hover:bg-[var(--bg-main)] backdrop-blur-md text-white/80 hover:text-white border border-[var(--border-color)] rounded-lg text-sm font-bold transition-all shadow-lg",children:g?"Î≥¥ÎÑàÏä§ ÏÑ§Ï†ï Îã´Í∏∞":"Ï†úÏûë Î≥¥ÎÑàÏä§ ÏÑ§Ï†ï"}),g&&(0,t.jsxs)("div",{className:`pointer-events-auto mt-3 bg-[var(--bg-main)]/95 backdrop-blur-xl border border-[var(--border-color)] rounded-xl shadow-2xl animate-in fade-in slide-in-from-top-4 origin-top-left relative ${p?"flex flex-col min-h-[520px] w-96 p-6":"w-80 p-4"}`,children:[p&&(0,t.jsx)("h3",{className:"text-sm font-bold text-[var(--color-primary)] mb-4 text-center uppercase tracking-widest border-b border-white/10 pb-2",children:"Ï†úÏûë Î≥¥ÎÑàÏä§ ÏÑ§Ï†ï"}),(0,t.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{className:"w-5 h-5 rounded-full bg-[var(--text-secondary)]/20 hover:bg-[var(--color-primary)] text-[var(--text-secondary)] hover:text-white flex items-center justify-center text-[10px] font-bold transition-all cursor-help",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:"?"}),(0,t.jsx)("div",{className:`absolute left-full top-0 ml-4 transition-all duration-300 origin-top-left z-[60] ${u?"opacity-100 scale-100 translate-x-0":"opacity-0 scale-95 -translate-x-4 pointer-events-none"}`,children:(0,t.jsx)(d,{className:"w-80"})})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-[var(--text-secondary)] uppercase tracking-widest mb-2",children:"ÎãàÎÇòÎ∏åÏùò Ï∂ïÎ≥µ (Ï†úÏûë ÏãúÍ∞Ñ Îã®Ï∂ï)"}),(0,t.jsx)("button",{onClick:()=>n(!l),className:`w-full py-2.5 rounded-lg text-xs font-bold transition-all border ${l?"bg-[var(--color-primary)] border-[var(--color-primary)] text-white shadow-lg":"bg-[var(--bg-panel)] border-[var(--border-color)] text-[var(--text-secondary)] hover:text-white"}`,children:l?"Ï†ÅÏö© Ï§ë (ON)":"ÎØ∏Ï†ÅÏö© (OFF)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-[var(--text-secondary)] uppercase tracking-widest mb-2",children:"Ï†úÏûë ÏàòÏàòÎ£å Í∞êÏÜå (%)"}),(0,t.jsxs)("div",{className:"flex items-center bg-[var(--bg-panel)] border border-[var(--border-color)] rounded-lg px-3",children:[(0,t.jsx)("input",{type:"number",value:e??"",onChange:e=>a(""===e.target.value?null:Number(e.target.value)),className:"w-full bg-transparent py-2 text-sm text-[var(--text-primary)] focus:outline-none placeholder-white/20",placeholder:"0"}),(0,t.jsx)("span",{className:"text-xs text-[var(--text-secondary)] font-bold ml-2",children:"%"})]}),(0,t.jsx)("p",{className:"text-[10px] text-[var(--text-secondary)] mt-1.5 leading-snug break-keep opacity-80",children:"* ÎåÄÏÑ±Í≥µ ÌôïÎ•†ÎèÑ ÎèôÏùºÌïòÍ≤å Ìï©ÏÇ∞ÌïòÏó¨ ÏûÖÎ†•Ìï©ÎãàÎã§."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-[var(--text-secondary)] uppercase tracking-widest mb-2",children:"ÎåÄÏÑ±Í≥µ ÌôïÎ•† (%)"}),(0,t.jsxs)("div",{className:"flex items-center bg-[var(--bg-panel)] border border-[var(--border-color)] rounded-lg px-3",children:[(0,t.jsx)("input",{type:"number",value:o??"",onChange:e=>s(""===e.target.value?null:Number(e.target.value)),className:"w-full bg-transparent py-2 text-sm text-[var(--text-primary)] focus:outline-none placeholder-white/20",placeholder:"0"}),(0,t.jsx)("span",{className:"text-xs text-[var(--text-secondary)] font-bold ml-2",children:"%"})]}),(0,t.jsxs)("p",{className:"text-[10px] text-[var(--text-secondary)] mt-1.5 opacity-80",children:["* Í∏∞Î≥∏ 5% + ",o||0,"% (ÏµúÏ¢Ö ",(.05*(1+(o||0)/100)*100).toFixed(2),"%)"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-[var(--text-secondary)] uppercase tracking-widest mb-2",children:"Ï†úÏûë ÏãúÍ∞Ñ Í∞êÏÜå (%)"}),(0,t.jsxs)("div",{className:"flex items-center bg-[var(--bg-panel)] border border-[var(--border-color)] rounded-lg px-3",children:[(0,t.jsx)("input",{type:"number",value:i??"",onChange:e=>c(""===e.target.value?null:Number(e.target.value)),className:"w-full bg-transparent py-2 text-sm text-[var(--text-primary)] focus:outline-none placeholder-white/20",placeholder:"0"}),(0,t.jsx)("span",{className:"text-xs text-[var(--text-secondary)] font-bold ml-2",children:"%"})]}),(0,t.jsxs)("p",{className:"text-[10px] text-[var(--text-secondary)] mt-1.5 leading-snug break-keep opacity-80",children:["* ÏµúÏ¢Ö Í∞êÏÜåÏú®: ",(i||0)+10*!!l,"% (ÏûÖÎ†•Í∞í ",i||0,"% + ÎãàÎÇòÎ∏å ",10*!!l,"%)"]})]})]})]})]})}function p({apiKey:e,setApiKey:a,fetchPrices:o,isLoading:s,logs:l,className:n="fixed top-6 right-6 z-50 flex flex-col items-end pointer-events-none",forceExpanded:i=!1,apiError:c}){let[d,x]=(0,r.useState)(!1),p=d||i;return(0,t.jsxs)("div",{className:n,children:[!i&&(0,t.jsx)("button",{onClick:()=>x(!d),className:"pointer-events-auto px-4 py-2 bg-[var(--bg-panel)] hover:bg-[var(--bg-main)] backdrop-blur-md text-white/80 hover:text-white border border-[var(--border-color)] rounded-lg text-sm font-bold transition-all shadow-lg",children:p?"ÏÑ§Ï†ï Îã´Í∏∞":"API ÏÑ§Ï†ï"}),p&&(0,t.jsxs)("div",{className:`pointer-events-auto mt-3 bg-[var(--bg-main)]/95 backdrop-blur-xl border border-[var(--border-color)] rounded-xl shadow-2xl animate-in fade-in slide-in-from-top-4 origin-top-left ${i?"flex flex-col min-h-[520px] w-96 p-6":"w-80 p-4"}`,children:[i&&(0,t.jsx)("h3",{className:"text-sm font-bold text-[var(--color-primary)] mb-4 text-center uppercase tracking-widest border-b border-white/10 pb-2",children:"API / ÏãúÏä§ÌÖú ÏÑ§Ï†ï"}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-[var(--text-secondary)] uppercase tracking-widest mb-2",children:"Lost Ark API Key"}),(0,t.jsx)("input",{type:"password",value:e,onChange:e=>a(e.target.value),placeholder:"API Key ÏûÖÎ†•",className:`w-full bg-[var(--bg-panel)] border rounded-lg px-3 py-2 text-sm text-[var(--text-primary)] focus:border-[var(--color-primary)] outline-none transition-colors ${c?"border-[var(--color-danger)] animate-pulse":"border-[var(--border-color)]"}`}),c&&(0,t.jsx)("p",{className:"text-[10px] text-red-400 font-bold mt-2 text-center animate-in fade-in slide-in-from-top-1",children:c}),(0,t.jsxs)("p",{className:"text-[10px] text-slate-400 mt-2 leading-relaxed text-center",children:[(0,t.jsx)("a",{href:"https://developer-lostark.game.onstove.com/",target:"_blank",rel:"noreferrer",className:"text-[var(--color-primary)] hover:brightness-110 underline font-bold",children:"Lost Ark Open API"}),"ÏóêÏÑú Ïä§ÌÜ†Î∏å Î°úÍ∑∏Ïù∏ ÌõÑ",(0,t.jsx)("br",{}),"API KeyÎ•º Î∞úÍ∏âÎ∞õÏïÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî."]})]}),(0,t.jsx)("button",{onClick:()=>o(e),disabled:s,className:"w-full py-2.5 bg-[var(--color-primary)] hover:brightness-110 text-white text-xs font-bold rounded-lg transition-colors disabled:opacity-50",children:s?"ÏãúÏÑ∏ Ï°∞Ìöå Ï§ë...":"ÏãúÏÑ∏ Ï°∞ÌöåÌïòÍ∏∞ (Ï¥àÍ∏∞Ìôî)"}),!i&&(0,t.jsxs)("div",{className:"mt-2 pt-3 border-t border-[var(--border-color)]",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("h3",{className:"text-[10px] font-bold text-[var(--text-secondary)] uppercase tracking-widest",children:"API Î°úÍ∑∏"}),s&&(0,t.jsx)("span",{className:"text-[10px] text-[var(--color-primary)] font-bold animate-pulse",children:"Ï°∞Ìöå Ï§ë..."})]}),(0,t.jsx)("div",{className:"h-48 overflow-y-auto bg-[var(--bg-panel)] rounded-lg p-2 border border-[var(--border-color)] custom-scrollbar",children:l.length>0?(0,t.jsx)("div",{className:"space-y-1.5",children:l.map((e,r)=>(0,t.jsx)("p",{className:"text-[11px] text-[var(--text-secondary)] font-mono leading-relaxed border-b border-[var(--border-color)] pb-1 last:border-0",children:e},r))}):(0,t.jsx)("p",{className:"text-[11px] text-[var(--text-secondary)] text-center py-4",children:"Î°úÍ∑∏ Í∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§."})})]})]})]})]})}function m({targetSlots:e,setTargetSlots:r,ownedRare:a,setOwnedRare:o,ownedUncommon:s,setOwnedUncommon:l,ownedCommon:n,setOwnedCommon:i,prices:c,bundleCounts:d}){return(0,t.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,t.jsxs)("div",{className:"bg-black/20 rounded-2xl p-5 border border-white/5",children:[(0,t.jsx)("label",{className:"block text-[11px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-1",children:"Î™©Ìëú Ï†úÏûë Ïä¨Î°Ø"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"number",value:e,onChange:e=>r(Number(e.target.value)),min:"1",className:"w-full bg-transparent text-4xl font-black text-white focus:outline-none placeholder-slate-700"}),(0,t.jsx)("span",{className:"text-base font-bold text-slate-500",children:"Slots"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end px-2",children:[(0,t.jsx)("label",{className:"text-[11px] font-bold text-slate-500 uppercase tracking-widest",children:"ÌòÑÏû¨ Î≥¥Ïú†Îüâ (Î≤åÎ™© Ïû¨Î£å)"}),(0,t.jsx)("span",{className:"text-[10px] text-slate-600 font-medium",children:"Ïù∏Í≤åÏûÑ Î≥¥Ïú†ÎüâÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"})]}),(0,t.jsxs)("div",{className:"bg-black/30 px-5 py-3.5 rounded-2xl border border-white/5 flex items-center justify-between group/item hover:border-blue-500/30 transition-colors",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-blue-400 w-16 group-hover/item:text-blue-300 transition-colors",children:"Ìù¨Í∑Ä"}),(0,t.jsx)("div",{className:"flex-1 flex flex-col items-end mr-4",children:(0,t.jsx)("input",{type:"number",value:a,onChange:e=>o(Number(e.target.value)),className:"w-full bg-transparent text-right font-bold text-xl outline-none text-slate-200 focus:text-white transition-colors placeholder-slate-700"})}),c.rare>0&&(0,t.jsxs)("div",{className:"text-right text-[10px] text-slate-500 w-24 border-l border-white/5 pl-4",children:[(0,t.jsxs)("span",{className:"block text-slate-400 font-mono",children:[c.rare.toLocaleString()," G"]}),(0,t.jsxs)("span",{className:"block text-[9px] uppercase",children:["Per ",d.rare]})]})]}),(0,t.jsxs)("div",{className:"bg-black/30 px-5 py-3.5 rounded-2xl border border-white/5 flex items-center justify-between group/item hover:border-emerald-500/30 transition-colors",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-emerald-400 w-16 group-hover/item:text-emerald-300 transition-colors",children:"Í≥†Í∏â"}),(0,t.jsx)("div",{className:"flex-1 flex flex-col items-end mr-4",children:(0,t.jsx)("input",{type:"number",value:s,onChange:e=>l(Number(e.target.value)),className:"w-full bg-transparent text-right font-bold text-xl outline-none text-slate-200 focus:text-white transition-colors placeholder-slate-700"})}),c.uncommon>0&&(0,t.jsxs)("div",{className:"text-right text-[10px] text-slate-500 w-24 border-l border-white/5 pl-4",children:[(0,t.jsxs)("span",{className:"block text-slate-400 font-mono",children:[c.uncommon.toLocaleString()," G"]}),(0,t.jsxs)("span",{className:"block text-[9px] uppercase",children:["Per ",d.uncommon]})]})]}),(0,t.jsxs)("div",{className:"bg-black/30 px-5 py-3.5 rounded-2xl border border-white/5 flex items-center justify-between group/item hover:border-slate-500/30 transition-colors",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-slate-200 w-16 group-hover/item:text-white transition-colors",children:"ÏùºÎ∞ò"}),(0,t.jsx)("div",{className:"flex-1 flex flex-col items-end mr-4",children:(0,t.jsx)("input",{type:"number",value:n,onChange:e=>i(Number(e.target.value)),className:"w-full bg-transparent text-right font-bold text-xl outline-none text-slate-200 focus:text-white transition-colors placeholder-slate-700"})}),c.common>0&&(0,t.jsxs)("div",{className:"text-right text-[10px] text-slate-500 w-24 border-l border-white/5 pl-4",children:[(0,t.jsxs)("span",{className:"block text-slate-400 font-mono",children:[c.common.toLocaleString()," G"]}),(0,t.jsxs)("span",{className:"block text-[9px] uppercase",children:["Per ",d.common]})]})]})]})]})}function b({profitStats:e}){return e?(0,t.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${e.sellingProfit>=0?"bg-emerald-500/5 border-emerald-500/20 hover:bg-emerald-500/10":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10"}`,children:[(0,t.jsx)("h4",{className:`text-center text-[10px] font-bold mb-3 uppercase tracking-widest ${e.sellingProfit>=0?"text-emerald-400":"text-red-400"}`,children:"ÌåêÎß§ Ïãú ÏàòÏùµ (ÏàòÏàòÎ£å 5%)"}),(0,t.jsxs)("div",{className:"bg-black/20 rounded-xl p-3 mb-3 space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs font-bold font-mono",children:[(0,t.jsx)("span",{className:"text-emerald-400/70 uppercase tracking-wider text-[10px]",children:"Revenue"}),(0,t.jsx)("span",{className:"text-white tracking-wide",children:Math.floor(e.sellingRevenue).toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs font-bold font-mono",children:[(0,t.jsx)("span",{className:"text-red-400/70 uppercase tracking-wider text-[10px]",children:"Cost"}),(0,t.jsxs)("span",{className:"text-red-200/80 tracking-wide",children:["-",Math.floor(e.totalCost).toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center pt-1",children:[(0,t.jsx)("span",{className:`text-[9px] font-extrabold mb-1 uppercase tracking-[0.2em] ${e.sellingProfit>=0?"text-emerald-600":"text-red-600"}`,children:"NET PROFIT"}),(0,t.jsxs)("span",{className:`text-3xl font-black tracking-tight ${e.sellingProfit>=0?"text-emerald-400":"text-red-400"}`,children:[e.sellingProfit>=0?"+":"",Math.floor(e.sellingProfit).toLocaleString()," ",(0,t.jsx)("span",{className:"text-sm font-bold opacity-50",children:"G"})]})]})]}),(0,t.jsxs)("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${e.usageProfit>=0?"bg-sky-500/5 border-sky-500/20 hover:bg-sky-500/10":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10"}`,children:[(0,t.jsx)("h4",{className:`text-center text-[10px] font-bold mb-3 uppercase tracking-widest ${e.usageProfit>=0?"text-sky-400":"text-red-400"}`,children:"Î≥∏Ïù∏ ÏÇ¨Ïö© Ïù¥Îìù"}),(0,t.jsxs)("div",{className:"bg-black/20 rounded-xl p-3 mb-3 space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs font-bold font-mono",children:[(0,t.jsx)("span",{className:"text-sky-400/70 uppercase tracking-wider text-[10px]",children:"Value"}),(0,t.jsx)("span",{className:"text-white tracking-wide",children:Math.floor(e.grossRevenue).toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs font-bold font-mono",children:[(0,t.jsx)("span",{className:"text-red-400/70 uppercase tracking-wider text-[10px]",children:"Cost"}),(0,t.jsxs)("span",{className:"text-red-200/80 tracking-wide",children:["-",Math.floor(e.totalCost).toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center pt-1",children:[(0,t.jsx)("span",{className:`text-[9px] font-extrabold mb-1 uppercase tracking-[0.2em] ${e.usageProfit>=0?"text-sky-600":"text-red-600"}`,children:"SAVED"}),(0,t.jsxs)("span",{className:`text-3xl font-black tracking-tight ${e.usageProfit>=0?"text-sky-400":"text-red-400"}`,children:[e.usageProfit>=0?"+":"",Math.floor(e.usageProfit).toLocaleString()," ",(0,t.jsx)("span",{className:"text-sm font-bold opacity-50",children:"G"})]})]})]})]}):null}var u=e.i(75144);function h(){let{theme:e,setTheme:a}=(0,u.useTheme)(),[o,s]=(0,r.useState)(!1),l={midnight:"bg-[#3b82f6]",forest:"bg-[#10b981]",ocean:"bg-[#06b6d4]",obsidian:"bg-[#ef4444]",sunset:"bg-[#f97316]"};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>s(!o),className:"flex items-center gap-2 px-3 py-1.5 bg-[#1a1d29] border border-white/10 rounded-lg text-xs font-bold text-slate-400 hover:text-white hover:bg-white/5 transition-all",children:[(0,t.jsx)("span",{className:`w-2 h-2 rounded-full ${l[e]}`}),(0,t.jsx)("span",{children:u.THEMES[e]})]}),o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),(0,t.jsx)("div",{className:"absolute bottom-full right-0 mb-2 w-32 bg-[#1a1d29] border border-white/10 rounded-xl shadow-xl z-50 overflow-hidden py-1",children:Object.entries(u.THEMES).map(([r,o])=>(0,t.jsxs)("button",{onClick:()=>{a(r),s(!1)},className:`w-full text-left px-4 py-2 text-xs font-bold flex items-center gap-2 hover:bg-white/5 transition-colors ${e===r?"text-white":"text-slate-500"}`,children:[(0,t.jsx)("span",{className:`w-2 h-2 rounded-full ${l[r]}`}),o]},r))})]})]})}function g({activeTab:e,results:r,prices:a}){return(0,t.jsxs)("section",{className:"bg-white/[0.03] border border-white/5 rounded-[2rem] p-6 flex flex-col relative overflow-hidden",children:[(0,t.jsxs)("h2",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full"}),"Íµ¨Îß§ ÌïÑÏöî ÌöüÏàò (","abidos"===e?"ÏïÑÎπÑÎèÑÏä§":"ÏÉÅÍ∏â ÏïÑÎπÑÎèÑÏä§",")"]}),(0,t.jsx)("div",{className:"space-y-4 flex-1",children:[{key:"rare",label:n.name,color:"#3b82f6",bg:"bg-blue-500/10"},{key:"uncommon",label:l.name,color:"#10b981",bg:"bg-emerald-500/10"},{key:"common",label:s.name,color:"#f8fafc",bg:"bg-slate-500/10"}].map(({key:e,label:o,color:s,bg:l})=>{let n=r[e],i=(e=>{let t=r[e];if(t.buyCount<=0)return 0;let o=a[e];return t.buyCount*o})(e),c=n.buyCount<=0;return(0,t.jsxs)("div",{className:`group flex flex-col p-4 rounded-2xl transition-all duration-300 ${c?"bg-white/[0.02] border border-white/[0.02] opacity-50 hover:opacity-100":"bg-black/20 border border-white/5 hover:border-white/10"}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-bold tracking-tight",style:{color:s},children:o}),(0,t.jsx)("div",{className:`px-3 py-1 rounded-full text-[10px] font-bold ${c?"bg-emerald-500/20 text-emerald-400":"bg-amber-500/20 text-amber-400"}`,children:c?"Î≥¥Ïú†Îüâ Ï∂©Î∂Ñ":"Íµ¨Îß§ ÌïÑÏöî"})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2 mb-1",children:[(0,t.jsx)("span",{className:`text-4xl font-black tracking-tighter ${c?"text-slate-600":"text-white"}`,children:n.buyCount}),(0,t.jsxs)("span",{className:"text-xs font-bold text-slate-600 uppercase",children:["Ìöå ",(0,t.jsxs)("span",{className:"text-slate-700 font-medium ml-0.5",children:["(",n.bundleSize," Îã®ÏúÑ)"]})]})]}),i>0&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-white/5 flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest",children:"Estimated Cost"}),(0,t.jsxs)("span",{className:"text-sm font-bold text-amber-500/90 font-mono",children:[i.toLocaleString()," ",(0,t.jsx)("span",{className:"text-[10px] text-amber-500/50",children:"G"})]})]})]},e)})})]})}function f({history:e,onDelete:a}){let[o,s]=(0,r.useState)(!1),[l,n]=(0,r.useState)("newest"),[i,c]=(0,r.useState)("all"),d=(0,r.useMemo)(()=>{let t=[...e];return"all"!==i&&(t=t.filter(e=>e.type===("superior"===i?"superior":"abidos"))),t.sort((e,t)=>"newest"===l?t.timestamp-e.timestamp:e.timestamp-t.timestamp),t},[e,i,l]),x=(0,r.useMemo)(()=>d.reduce((e,t)=>e+(t.expectedProfit||0),0),[d]);return(0,t.jsxs)("section",{className:"bg-[var(--bg-panel)]/80 backdrop-blur-md border border-[var(--border-color)] rounded-[2rem] p-6 shadow-2xl min-h-[500px]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-1 h-6 bg-[var(--color-primary)] rounded-full"}),"Ï†úÏûë Í∏∞Î°ù",(0,t.jsxs)("span",{className:"text-xs font-normal text-[var(--text-secondary)] ml-2",children:[e.length,"Í∞úÏùò Í∏∞Î°ù"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex bg-[var(--bg-main)] p-1 rounded-lg border border-[var(--border-color)]",children:[(0,t.jsx)("button",{onClick:()=>c("all"),className:`px-3 py-1 rounded text-xs font-bold transition-all ${"all"===i?"bg-[var(--text-secondary)] text-[var(--bg-main)]":"text-[var(--text-secondary)] hover:text-white"}`,children:"Ï†ÑÏ≤¥"}),(0,t.jsx)("button",{onClick:()=>c("abidos"),className:`px-3 py-1 rounded text-xs font-bold transition-all ${"abidos"===i?"bg-[var(--color-primary)] text-white":"text-[var(--text-secondary)] hover:text-white"}`,children:"ÏïÑÎπÑÎèÑÏä§"}),(0,t.jsx)("button",{onClick:()=>c("superior"),className:`px-3 py-1 rounded text-xs font-bold transition-all ${"superior"===i?"bg-[var(--color-secondary)] text-white":"text-[var(--text-secondary)] hover:text-white"}`,children:"ÏÉÅÍ∏â"})]}),(0,t.jsxs)("button",{onClick:()=>n(e=>"newest"===e?"oldest":"newest"),className:"px-3 py-1.5 bg-[var(--bg-main)] border border-[var(--border-color)] rounded-lg text-xs font-bold text-[var(--text-secondary)] hover:text-white hover:bg-white/5 transition-all flex items-center gap-1",children:[(0,t.jsx)("span",{children:"newest"===l?"ÏµúÏã†Ïàú":"Ïò§ÎûòÎêúÏàú"}),(0,t.jsx)("svg",{className:`w-3 h-3 transition-transform ${"newest"===l?"rotate-0":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.length>0&&(0,t.jsx)("button",{onClick:()=>s(!o),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${o?"bg-red-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:o?"ÏôÑÎ£å":"Ìé∏Ïßë"})]})]}),d.length>0?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm text-left border-collapse border border-[var(--border-color)]",children:[(0,t.jsx)("thead",{className:"bg-[var(--bg-main)] text-[var(--text-secondary)] font-bold whitespace-nowrap",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border border-[var(--border-color)] px-3 py-2",children:"ÏãúÍ∞Ñ"}),(0,t.jsx)("th",{className:"border border-[var(--border-color)] px-3 py-2",children:"Ï¢ÖÎ•ò"}),(0,t.jsx)("th",{className:"border border-[var(--border-color)] px-3 py-2 text-right",children:"Îã®Í∞Ä"}),(0,t.jsx)("th",{className:"border border-[var(--border-color)] px-3 py-2 text-right",children:"Ï¥ù ÎπÑÏö©"}),(0,t.jsx)("th",{className:"border border-[var(--border-color)] px-3 py-2 text-right",children:"ÏòàÏÉÅ Í≤∞Í≥º"}),(0,t.jsx)("th",{className:"border border-[var(--border-color)] px-3 py-2 text-right",children:"ÏòàÏÉÅ ÏàòÏùµ"}),o&&(0,t.jsx)("th",{className:"border border-[var(--border-color)] px-3 py-2 text-center w-[50px] bg-[var(--color-danger)]/20 text-red-200",children:"ÏÇ≠Ï†ú"})]})}),(0,t.jsx)("tbody",{children:d.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,t.jsx)("td",{className:"border border-[var(--border-color)] px-3 py-2 text-[var(--text-secondary)] font-mono text-xs whitespace-nowrap",children:new Date(e.timestamp).toLocaleString()}),(0,t.jsx)("td",{className:"border border-[var(--border-color)] px-3 py-2 whitespace-nowrap",children:(0,t.jsx)("span",{className:`text-xs px-1.5 py-0.5 rounded font-bold ${"abidos"===e.type?"text-[var(--color-primary)] bg-[var(--color-primary)]/10":"text-[var(--color-secondary)] bg-[var(--color-secondary)]/10"}`,children:"abidos"===e.type?"ÏïÑÎπÑÎèÑÏä§":"ÏÉÅÍ∏â ÏïÑÎπÑÎèÑÏä§"})}),(0,t.jsxs)("td",{className:"border border-[var(--border-color)] px-3 py-2 text-right font-bold text-[var(--color-primary)] whitespace-nowrap",children:[Math.floor(e.unitCost).toLocaleString()," G"]}),(0,t.jsxs)("td",{className:"border border-[var(--border-color)] px-3 py-2 text-right text-[var(--text-primary)] whitespace-nowrap",children:[Math.floor(e.totalCost).toLocaleString()," G"]}),(0,t.jsxs)("td",{className:"border border-[var(--border-color)] px-3 py-2 text-right text-[var(--text-primary)] whitespace-nowrap",children:[Math.floor(e.expectedOutput).toLocaleString()," Í∞ú"]}),(0,t.jsxs)("td",{className:`border border-[var(--border-color)] px-3 py-2 text-right font-bold whitespace-nowrap ${e.expectedProfit>=0?"text-[var(--color-success)]":"text-[var(--color-danger)]"}`,children:[e.expectedProfit>0?"+":"",Math.floor(e.expectedProfit||0).toLocaleString()," G"]}),o&&(0,t.jsx)("td",{className:"border border-[var(--border-color)] px-3 py-2 text-center bg-[var(--color-danger)]/10",children:(0,t.jsx)("button",{onClick:()=>a(e.id),className:"text-white bg-[var(--color-danger)] hover:brightness-110 transition-colors w-6 h-6 rounded flex items-center justify-center mx-auto",title:"ÏÇ≠Ï†ú",children:"‚úï"})})]},e.id))}),(0,t.jsx)("tfoot",{className:"bg-[var(--bg-main)] font-bold",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{colSpan:5,className:"border border-[var(--border-color)] px-3 py-3 text-right text-[var(--text-secondary)]",children:"Ï¥ù ÏòàÏÉÅ ÏàòÏùµ Ìï©Í≥Ñ"}),(0,t.jsxs)("td",{className:`border border-[var(--border-color)] px-3 py-3 text-right text-lg ${x>=0?"text-[var(--color-success)]":"text-[var(--color-danger)]"}`,children:[x>0?"+":"",Math.floor(x).toLocaleString()," G"]}),o&&(0,t.jsx)("td",{className:"border border-[var(--border-color)] bg-[var(--bg-main)]"})]})})]})}):(0,t.jsxs)("div",{className:"text-center py-20 text-slate-500",children:[(0,t.jsx)("p",{className:"mb-2 text-4xl",children:"üìù"}),(0,t.jsx)("p",{children:"ÏïÑÏßÅ Ï†úÏûë Í∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§."}),(0,t.jsx)("p",{className:"text-sm mt-2",children:"ÌôîÎ©¥ Í≥µÏú†(Ïò§Î≤ÑÎ†àÏù¥) Î™®ÎìúÏóêÏÑú 'Ï†úÏûë ÏôÑÎ£å'Î•º ÎàåÎü¨ Í∏∞Î°ùÌï¥Î≥¥ÏÑ∏Ïöî."})]})]})}let v={abidos:{rare:33,uncommon:45,common:86,gold:400},superior:{rare:43,uncommon:59,common:112,gold:520}};function y(){let[e,d]=(0,r.useState)("superior"),[u,y]=(0,r.useState)(1),[j,N]=(0,r.useState)(0),[w,k]=(0,r.useState)(0),[S,C]=(0,r.useState)(0),[$,P]=(0,r.useState)(""),[z,L]=(0,r.useState)({rare:0,uncommon:0,common:0,fusion:0,superiorFusion:0}),[M,E]=(0,r.useState)({rare:10,uncommon:10,common:10,fusion:10,superiorFusion:10}),[A,I]=(0,r.useState)(!1),[R,T]=(0,r.useState)([]),[G,O]=(0,r.useState)(null),[B,F]=(0,r.useState)(null),[K,W]=(0,r.useState)(null),[D,U]=(0,r.useState)(!1),[V,_]=(0,r.useState)(null),[J,H]=(0,r.useState)(null),[q,Q]=(0,r.useState)(!1),[X,Y]=(0,r.useState)(!1),[Z,ee]=(0,r.useState)(!1),[et,er]=(0,r.useState)("calculator"),[ea,eo]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem("matCalcData");if(e)try{let t=JSON.parse(e);y(Number(t.targetSlots)||1),N(Number(t.ownedRare)||0),k(Number(t.ownedUncommon)||0),C(Number(t.ownedCommon)||0),t.activeTab&&d(t.activeTab),t.apiKey&&P(t.apiKey),"number"==typeof t.costReduction&&F(t.costReduction),"number"==typeof t.greatSuccessChance&&W(t.greatSuccessChance),"boolean"==typeof t.ninavBlessing&&U(t.ninavBlessing),"number"==typeof t.timeReduction&&_(t.timeReduction),t.history&&eo(t.history),t.apiKey&&"number"==typeof t.costReduction&&"number"==typeof t.greatSuccessChance&&"number"==typeof t.timeReduction&&em(!0)}catch(e){console.error(e)}Q(!0);let t=setTimeout(()=>ee(!0),100);return()=>clearTimeout(t)},[]),(0,r.useEffect)(()=>{localStorage.setItem("matCalcData",JSON.stringify({targetSlots:u,ownedRare:j,ownedUncommon:w,ownedCommon:S,activeTab:e,apiKey:$,costReduction:B,greatSuccessChance:K,ninavBlessing:D,timeReduction:V,history:ea}))},[u,j,w,S,e,$,B,K,D,V,ea]);let es=e=>{let t=new Date().toLocaleTimeString();T(r=>[`[${t}] ${e}`,...r])},el=(0,r.useCallback)(async e=>{if(!e)return;O(null),Y(!1);let t=e.trim();if(/[^\x00-\x7F]/.test(t)){let e="API KeyÏóê ÌóàÏö©ÎêòÏßÄ ÏïäÎäî Î¨∏Ïûê(ÌïúÍ∏Ä/ÌäπÏàòÎ¨∏Ïûê)Í∞Ä Ìè¨Ìï®ÎêòÏñ¥ ÏûàÏäµÎãàÎã§.";es(`[Ïò§Î•ò] ${e}`),O(e),I(!1);return}I(!0),es("ÏãúÏÑ∏ ÏûêÎèô Ï°∞Ìöå ÏãúÏûë...");try{let e=[{...n,key:"rare"},{...l,key:"uncommon"},{...s,key:"common"},{...i,key:"fusion"},{...c,key:"superiorFusion"}],r={},a={};for(let s of e){es(`[ÏöîÏ≤≠] ${s.name} (ID: ${s.id}, Cat: ${s.categoryCode})`);try{let e=await o.getMarketPrice(t,s.id,s.name,s.categoryCode);null!==e?(es(`[ÏàòÏã†] ${s.name}: ${e.price}G / unit: ${e.bundleCount}`),r[s.key]=e.price,a[s.key]=e.bundleCount):es(`[Ïã§Ìå®] ${s.name}: Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå (result is null)`)}catch(t){let e=t instanceof Error?t.message:String(t);if(es(`[ÏóêÎü¨] ${s.name}: ${e}`),e.includes("401")||e.includes("403"))throw Error("API Key Ïù∏Ï¶ù Ïã§Ìå® (401/403)")}}L(e=>({...e,...r})),E(e=>({...e,...a})),Y(!0),es("ÏãúÏÑ∏ ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å")}catch(t){let e=t instanceof Error?t.message:String(t)||"ÏãúÏÑ∏ Ï°∞Ìöå Ï§ë Ïò§Î•ò Î∞úÏÉù";es(`Ï†ÑÏ≤¥ ÏóêÎü¨: ${e}`),O(e)}finally{I(!1)}},[]),en=r.default.useRef(null);(0,r.useEffect)(()=>{if(!$)return;el($);let e=new Date,t=setTimeout(()=>{el($),en.current=setInterval(()=>{el($)},6e4)},(60-e.getSeconds())*1e3-e.getMilliseconds());return()=>{clearTimeout(t),en.current&&clearInterval(en.current)}},[$,el]);let ei=(0,r.useMemo)(()=>{let t=Math.max(0,u),r={rare:j,uncommon:w,common:S},a={totalMissingCost:0},o=v[e];return["rare","uncommon","common"].forEach(e=>{let s=o[e]*t,l=s-r[e],n=M[e]||10,i=l<=0?0:Math.ceil(l/n),c=i*(z[e]||0);a[e]={buyCount:i,needed:s,bundleSize:n,cost:c},a.totalMissingCost+=c}),a},[u,j,w,S,e,M,z]),ec=(0,r.useMemo)(()=>{let t=Math.max(0,u);if(0===t)return null;let r=v[e],a="abidos"===e?"fusion":"superiorFusion",o=z[a];if(!o||0===z.rare||0===z.uncommon||0===z.common)return null;let s=0;["rare","uncommon","common"].forEach(e=>{let a=r[e]*t,o=z[e],l=M[e]||1;s+=o/l*a});let l=r.gold*t*(1-(B||0)/100),n=10*(1+.05*(1+(K||0)/100))*t,i=o/(M[a]||1)*n,c=s+l,d=.95*i;return{grossRevenue:i,sellingRevenue:d,matCost:s,goldCost:l,totalCost:c,sellingProfit:d-c,usageProfit:i-c,outputQty:n}},[u,e,z,M,B,K]),ed=(0,r.useCallback)(()=>{let t=v[e];if(u<=0)return;let r=0;["rare","uncommon","common"].forEach(e=>{let a=t[e]*u,o=z[e],s=M[e]||1;r+=o/s*a});let a=t.gold*u,o=r+a*(1-(B||0)/100),s=10*(1+.05*(1+(K||0)/100))*u,l="abidos"===e?"fusion":"superiorFusion",n=z[l]||0,i=M[l]||1,c=i>0?n/i:0,d=s*c*.95-o;es(`[ÎîîÎ≤ÑÍ∑∏] ${l} Í∞ÄÍ≤©: ${n}, Î≤àÎì§: ${i}, Í∞úÎãπÍ∞ÄÍ≤©: ${c}, ÏòàÏÉÅÏàòÏùµ: ${d}`);let x={id:crypto.randomUUID(),timestamp:Date.now(),type:e,unitCost:o/s,totalCost:o,expectedOutput:s,expectedProfit:d};eo(e=>[x,...e]),es(`[Í∏∞Î°ù] Ï†úÏûë ÏôÑÎ£å - Ïù¥Ïùµ: ${Math.floor(d).toLocaleString()}G`)},[e,u,z,M,B,K]),ex=async()=>{if(!("documentPictureInPicture"in window))return void alert("PiP ÎØ∏ÏßÄÏõê");try{let e=await window.documentPictureInPicture.requestWindow({width:360,height:600});H(e);let t=getComputedStyle(document.body),r=document.createElement("style");r.textContent=`
        :root {
          --bg-main: ${t.getPropertyValue("--bg-main")};
          --bg-panel: ${t.getPropertyValue("--bg-panel")};
          --text-primary: ${t.getPropertyValue("--text-primary")};
          --text-secondary: ${t.getPropertyValue("--text-secondary")};
          --color-primary: ${t.getPropertyValue("--color-primary")};
          --color-secondary: ${t.getPropertyValue("--color-secondary")};
          --color-accent: ${t.getPropertyValue("--color-accent")};
          --color-success: ${t.getPropertyValue("--color-success")};
          --color-danger: ${t.getPropertyValue("--color-danger")};
          --border-color: ${t.getPropertyValue("--border-color")};
        }
        * { box-sizing: border-box; }
        body { background: var(--bg-main); color: var(--text-primary); font-family: 'Pretendard', sans-serif; padding: 12px 10px; margin: 0; overflow: hidden; transition: background 0.5s; }
        .container { display: flex; flex-direction: column; gap: 8px; }
        .tab-box { display: flex; background: var(--bg-panel); border-radius: 8px; padding: 2px; margin-bottom: 5px; }
        .tab-btn { flex: 1; padding: 6px; border: none; background: transparent; color: var(--text-secondary); font-size: 11px; font-weight: bold; cursor: pointer; border-radius: 6px; }
        .tab-btn.active.abidos { background: var(--color-primary); color: white; }
        .tab-btn.active.superior { background: var(--color-secondary); color: white; }
        .label { font-size: 11px; font-weight: bold; color: var(--text-secondary); margin-bottom: 2px; display: block; }
        .input-row { display: flex; align-items: center; background: var(--bg-panel); border-radius: 8px; padding: 5px 10px; border: 1px solid var(--border-color); }
        .input-row span { font-size: 11px; font-weight: bold; }
        input { background: transparent; border: none; color: var(--text-primary); text-align: right; font-weight: 900; width: 100%; outline: none; font-size: 16px; font-family: inherit; }
        .res-box { margin-top: 5px; padding-top: 8px; border-top: 1px solid var(--border-color); display: flex; flex-direction: column; gap: 4px; }
        .res-row { display: flex; justify-content: space-between; align-items: center; }
        .buy-val { color: var(--color-accent); font-weight: 900; font-size: 20px; }
        .update-btn { width: 100%; padding: 10px; background: linear-gradient(to right, var(--color-primary), var(--color-secondary)); color: white; border: none; border-radius: 8px; font-weight: bold; margin-top: 8px; cursor: pointer; }
        .update-btn:active { filter: brightness(0.9); transform: scale(0.98); }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .price-tag { font-size: 10px; color: var(--text-secondary); font-weight: bold; }
        .profit-split-container { display: flex; background: var(--bg-panel); border-radius: 8px; margin-top: 10px; overflow: hidden; border: 1px solid var(--border-color); }
        .profit-split-item { flex: 1; padding: 8px 4px; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
        .profit-split-item:first-child { border-right: 1px solid var(--border-color); }
        .profit-label { font-size: 10px; color: var(--text-secondary); font-weight: bold; margin-bottom: 4px; }
        .profit-val { font-size: 18px; font-weight: 900; line-height: 1; }
        .val-plus { color: var(--color-success); }
        .val-minus { color: var(--color-danger); }
      `,e.document.head.appendChild(r),e.addEventListener("pagehide",()=>{H(null)})}catch(e){console.error(e),alert("PiP Ïã§Ìñâ Ïã§Ìå®")}},[ep,em]=(0,r.useState)(!1),eb=!!$&&null!==B&&null!==K&&null!==V&&!G,eu=ep&&X;if((0,r.useEffect)(()=>{ep&&!eb&&em(!1)},[ep,eb]),!q)return(0,t.jsx)("div",{className:"min-h-screen bg-[var(--bg-main)]"});let eh=`fixed z-[60] flex flex-col transition-all duration-700 ease-[cubic-bezier(0.34,1.56,0.64,1)] ${ep?"top-6 left-6 scale-100 items-start translate-x-0 translate-y-0":"top-[35%] left-1/2 -translate-x-1/2 -translate-y-1/2 md:top-1/2 md:left-auto md:right-[calc(50%+16px)] md:translate-x-0 md:-translate-y-1/2 scale-95 items-center md:items-end"}`,eg=`fixed z-50 flex flex-col transition-all duration-700 ease-[cubic-bezier(0.34,1.56,0.64,1)] ${ep?"top-6 right-6 scale-100 items-end translate-x-0 translate-y-0":"top-[65%] left-1/2 -translate-x-1/2 -translate-y-1/2 md:top-1/2 md:left-[calc(50%+16px)] md:translate-x-0 md:-translate-y-1/2 scale-95 items-center md:items-start"}`,ef=`fixed left-1/2 -translate-x-1/2 transition-all duration-700 ease-[cubic-bezier(0.34,1.56,0.64,1)] z-50 flex flex-col items-center whitespace-nowrap pointer-events-none ${ep?"top-6 scale-75 opacity-100":"top-[15%] md:top-[18%] scale-100 opacity-100"}`;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:`fixed inset-0 bg-[var(--bg-main)]/95 backdrop-blur-md z-40 pointer-events-none flex flex-col items-center justify-center ${ep?"opacity-0 invisible":"opacity-100"}`,style:{transition:Z?`opacity 1s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s linear ${ep?"1s":"0s"}`:"none"},children:[(0,t.jsx)("div",{className:"absolute top-[20%] text-center space-y-3 px-4 pt-16",children:(0,t.jsxs)("p",{className:`text-slate-400 text-sm md:text-base font-medium transition-all duration-500 delay-200 ${eb?"opacity-0 -translate-y-4":"opacity-100 translate-y-0"}`,children:["Ï†ïÌôïÌïú Ïù¥Îìù Í≥ÑÏÇ∞ÏùÑ ÏúÑÌï¥ ",(0,t.jsx)("span",{className:"text-white font-bold",children:"API Key"}),"ÏôÄ ",(0,t.jsx)("span",{className:"text-white font-bold",children:"Ï†úÏûë Î≥¥ÎÑàÏä§"}),"Î•º ÏÑ§Ï†ïÌï¥Ï£ºÏÑ∏Ïöî."]})}),(0,t.jsxs)("div",{className:`absolute bottom-10 md:bottom-24 left-1/2 -translate-x-1/2 transition-all duration-700 pointer-events-auto z-[100] ${eb?"opacity-100 translate-y-0":"opacity-0 translate-y-8 pointer-events-none"}`,children:[(0,t.jsxs)("button",{onClick:()=>em(!0),className:"group relative px-8 py-4 bg-[var(--color-primary)] hover:bg-[var(--color-secondary)] text-white text-lg font-black rounded-2xl shadow-2xl hover:shadow-[var(--color-primary)]/50 transition-all active:scale-95 flex items-center gap-3 overflow-hidden",children:[(0,t.jsx)("span",{className:"relative z-10",children:"Í≥ÑÏÇ∞Í∏∞ ÏãúÏûëÌïòÍ∏∞"}),(0,t.jsx)("svg",{className:"w-6 h-6 relative z-10 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"})]}),(0,t.jsx)("p",{className:"text-center text-[var(--text-secondary)] text-xs mt-4 animate-pulse uppercase tracking-widest font-bold",children:"All Systems Ready"})]})]}),(0,t.jsxs)("div",{className:ef,children:[(0,t.jsxs)("h1",{className:"text-3xl md:text-4xl font-black text-[var(--text-primary)] tracking-tighter drop-shadow-2xl flex items-center gap-2 mb-4",children:[(0,t.jsx)("span",{className:"text-[var(--color-primary)]",children:"Lost Ark"})," Material Calculator"]}),(0,t.jsxs)("div",{className:`flex bg-black/40 backdrop-blur-md rounded-full p-1.5 border border-white/10 transition-all duration-500 delay-200 pointer-events-auto ${ep?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:[(0,t.jsx)("button",{onClick:()=>er("calculator"),className:`px-8 py-2 rounded-full text-sm font-bold transition-all ${"calculator"===et?"bg-[var(--text-primary)] text-[var(--bg-main)] shadow-lg scale-105":"text-slate-400 hover:text-white"}`,children:"Ïû¨Î£å Í≥ÑÏÇ∞Í∏∞"}),(0,t.jsx)("button",{onClick:()=>er("history"),className:`px-8 py-2 rounded-full text-sm font-bold transition-all ${"history"===et?"bg-[var(--text-primary)] text-[var(--bg-main)] shadow-lg scale-105":"text-slate-400 hover:text-white"}`,children:"Ï†úÏûë Í∏∞Î°ù"})]})]}),(0,t.jsx)(x,{costReduction:B,setCostReduction:F,greatSuccessChance:K,setGreatSuccessChance:W,ninavBlessing:D,setNinavBlessing:U,timeReduction:V,setTimeReduction:_,className:eh,forceExpanded:!ep}),(0,t.jsx)(p,{apiKey:$,setApiKey:P,fetchPrices:el,isLoading:A,logs:R,className:eg,forceExpanded:!ep,apiError:G}),(0,t.jsx)("div",{className:`max-w-5xl w-full relative transition-opacity duration-1000 pt-32 ${eu?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none h-0 overflow-hidden"}`,children:"calculator"===et?(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("section",{className:"bg-[var(--bg-panel)]/80 backdrop-blur-md border border-white/5 rounded-[2rem] p-6 shadow-2xl relative overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--color-primary)]/5 to-[var(--color-secondary)]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none"}),(0,t.jsx)("header",{className:"mb-6 relative z-10",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-1 p-1 bg-black/40 rounded-xl border border-white/5 shadow-inner",children:[(0,t.jsxs)("button",{onClick:()=>d("abidos"),className:`py-2.5 rounded-lg text-sm font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 ${"abidos"===e?"bg-[var(--color-primary)] text-white shadow-lg shadow-[var(--color-primary)]/20 scale-[1.02]":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:[(0,t.jsx)("span",{children:"ÏïÑÎπÑÎèÑÏä§"}),z.fusion>0&&(0,t.jsxs)("span",{className:"text-[10px] opacity-90 font-mono bg-black/20 px-2 py-0.5 rounded-full",children:[z.fusion," G"]})]}),(0,t.jsxs)("button",{onClick:()=>d("superior"),className:`py-2.5 rounded-lg text-sm font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 ${"superior"===e?"bg-[var(--color-secondary)] text-white shadow-lg shadow-[var(--color-secondary)]/20 scale-[1.02]":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:[(0,t.jsx)("span",{children:"ÏÉÅÍ∏â ÏïÑÎπÑÎèÑÏä§"}),z.superiorFusion>0&&(0,t.jsxs)("span",{className:"text-[10px] opacity-90 font-mono bg-black/20 px-2 py-0.5 rounded-full",children:[z.superiorFusion," G"]})]})]})}),(0,t.jsx)(m,{targetSlots:u,setTargetSlots:e=>!isNaN(e)&&y(e),ownedRare:j,setOwnedRare:e=>!isNaN(e)&&N(e),ownedUncommon:w,setOwnedUncommon:e=>!isNaN(e)&&k(e),ownedCommon:S,setOwnedCommon:e=>!isNaN(e)&&C(e),prices:z,bundleCounts:M}),(0,t.jsxs)("div",{className:"pt-5 border-t border-white/5 mt-6",children:[(0,t.jsxs)("button",{onClick:ex,className:"w-full py-3.5 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] hover:brightness-110 text-white rounded-xl font-bold transition-all shadow-xl shadow-[var(--color-primary)]/20 active:scale-[0.98] flex items-center justify-center gap-2 group/btn",children:[(0,t.jsx)("span",{children:"Ïò§Î≤ÑÎ†àÏù¥ Ïã§Ìñâ"}),(0,t.jsx)("svg",{className:"w-4 h-4 opacity-70 group-hover/btn:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 00-2 2h10a2 2 0 00-2-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),(0,t.jsx)(b,{profitStats:ec})]})]}),(0,t.jsx)(g,{activeTab:e,results:ei,prices:z})]}):(0,t.jsx)(f,{history:ea,onDelete:e=>{eo(t=>t.filter(t=>t.id!==e))}})}),(0,t.jsx)("div",{className:`fixed bottom-6 right-6 z-50 transition-all duration-500 delay-500 ${ep?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:(0,t.jsx)(h,{})}),J&&(0,a.createPortal)((0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:"tab-box",children:[(0,t.jsx)("button",{className:`tab-btn ${"abidos"===e?"active abidos":""}`,onClick:()=>d("abidos"),children:"ÏïÑÎπÑÎèÑÏä§"}),(0,t.jsx)("button",{className:`tab-btn ${"superior"===e?"active superior":""}`,onClick:()=>d("superior"),children:"ÏÉÅÍ∏â ÏïÑÎπÑÎèÑÏä§"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Î™©Ìëú Ïä¨Î°Ø"}),(0,t.jsx)("div",{className:"input-row",children:(0,t.jsx)("input",{type:"number",value:u||"",onChange:e=>y(Number(e.target.value)||0)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Î≥¥Ïú†Îüâ"}),(0,t.jsxs)("div",{className:"input-row",style:{marginBottom:4},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,minWidth:100},children:[(0,t.jsx)("span",{style:{color:"#3b82f6",fontSize:13,fontWeight:"bold"},children:"Ìù¨Í∑Ä"}),z.rare>0&&(0,t.jsxs)("span",{className:"price-tag",children:[z.rare.toLocaleString()," G"]})]}),(0,t.jsx)("input",{type:"number",value:j||"",onChange:e=>N(Number(e.target.value)||0)})]}),(0,t.jsxs)("div",{className:"input-row",style:{marginBottom:4},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,minWidth:100},children:[(0,t.jsx)("span",{style:{color:"#1eff00",fontSize:13,fontWeight:"bold"},children:"Í≥†Í∏â"}),z.uncommon>0&&(0,t.jsxs)("span",{className:"price-tag",children:[z.uncommon.toLocaleString()," G"]})]}),(0,t.jsx)("input",{type:"number",value:w||"",onChange:e=>k(Number(e.target.value)||0)})]}),(0,t.jsxs)("div",{className:"input-row",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,minWidth:100},children:[(0,t.jsx)("span",{style:{color:"#ffffff",fontSize:13,fontWeight:"bold"},children:"ÏùºÎ∞ò"}),z.common>0&&(0,t.jsxs)("span",{className:"price-tag",children:[z.common.toLocaleString()," G"]})]}),(0,t.jsx)("input",{type:"number",value:S||"",onChange:e=>C(Number(e.target.value)||0)})]})]}),(0,t.jsxs)("div",{className:"res-box",children:[[{key:"rare",label:"Ìù¨Í∑Ä",color:"#3b82f6"},{key:"uncommon",label:"Í≥†Í∏â",color:"#1eff00"},{key:"common",label:"ÏùºÎ∞ò",color:"#ffffff"}].map(({key:e,label:r,color:a})=>{let o=ei[e];return o?(0,t.jsxs)("div",{className:"res-row",children:[(0,t.jsx)("span",{style:{fontSize:13,fontWeight:"bold",color:a},children:r}),(0,t.jsx)("div",{style:{textAlign:"right"},children:o.buyCount>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"buy-val",style:{marginRight:6},children:[o.buyCount,"Ìöå"]}),(0,t.jsxs)("span",{style:{fontSize:11,color:"#fbbf24",fontWeight:"bold"},children:["(",Math.floor(o.cost).toLocaleString()," G)"]})]}):(0,t.jsx)("span",{style:{color:"#475569",fontSize:14},children:"Ï∂©Î∂Ñ"})})]},e):null}),ei.totalMissingCost>0&&(0,t.jsxs)("div",{style:{borderTop:"1px solid #334155",marginTop:8,paddingTop:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)("span",{style:{fontSize:12,color:"#94a3b8"},children:"Ï¥ù Íµ¨Îß§ ÎπÑÏö©"}),(0,t.jsxs)("span",{style:{fontSize:16,color:"#fbbf24",fontWeight:"bold"},children:[Math.floor(ei.totalMissingCost).toLocaleString()," G"]})]})]}),ec&&(0,t.jsxs)("div",{className:"profit-split-container",children:[(0,t.jsxs)("div",{className:"profit-split-item",children:[(0,t.jsx)("span",{className:"profit-label",children:"ÌåêÎß§ Ïãú (ÏàòÏàòÎ£å 5%)"}),(0,t.jsxs)("div",{className:`profit-val ${ec.sellingProfit>=0?"val-plus":"val-minus"}`,children:[ec.sellingProfit>=0?"+":"",Math.floor(ec.sellingProfit).toLocaleString()]})]}),(0,t.jsxs)("div",{className:"profit-split-item",children:[(0,t.jsx)("span",{className:"profit-label",children:"ÏÇ¨Ïö© Ïãú (ÏàòÏàòÎ£å ÏóÜÏùå)"}),(0,t.jsxs)("div",{className:`profit-val ${ec.usageProfit>=0?"val-plus":"val-minus"}`,children:[ec.usageProfit>=0?"+":"",Math.floor(ec.usageProfit).toLocaleString()]})]})]}),(0,t.jsx)("button",{className:"update-btn",onClick:()=>{N(e=>{let t=ei.rare;return e+t.buyCount*t.bundleSize-t.needed}),k(e=>{let t=ei.uncommon;return e+t.buyCount*t.bundleSize-t.needed}),C(e=>{let t=ei.common;return e+t.buyCount*t.bundleSize-t.needed}),ed()},children:"Ï†úÏûë ÏôÑÎ£å (Î≥¥Ïú†Îüâ ÏóÖÎç∞Ïù¥Ìä∏)"})]}),J.document.body)]})}e.s(["default",()=>y],42416)}]);