(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42416,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(74080);class a{static BASE_URL="https://developer-lostark.game.onstove.com";static async getMarketPrice(e,t,s,r){try{console.log(`[API] Searching for ${s} (Category: ${r})...`);let a=await fetch(`${this.BASE_URL}/markets/items`,{method:"POST",headers:{Authorization:`bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({Sort:"CURRENT_MIN_PRICE",CategoryCode:r,ItemName:s,PageNo:1,SortCondition:"ASC"})});if(!a.ok)throw Error(`API Error: ${a.status}`);let o=await a.json();console.log(`[API] Response for ${s}:`,o);let l=o.Items||[],n=l.find(e=>e.Id===t)||l[0];if(n)return console.log("[API] Found item:",n),{price:n.CurrentMinPrice||n.RecentPrice||0,bundleCount:n.BundleCount||1};return null}catch(e){throw console.error("Failed to fetch market price:",e),e}}static async searchItems(e,t){try{let s=await fetch(`${this.BASE_URL}/markets/items`,{method:"POST",headers:{Authorization:`bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({Sort:"GRADE",CategoryCode:5e4,ItemName:t,PageNo:1,SortCondition:"ASC"})});if(!s.ok){let s=await fetch(`${this.BASE_URL}/markets/items`,{method:"POST",headers:{Authorization:`bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({Sort:"GRADE",ItemName:t,PageNo:1,SortCondition:"ASC"})});if(!s.ok)throw Error(`Search Error: ${s.status}`);return await s.json()}return await s.json()}catch(e){throw console.error("Search failed:",e),e}}}let o={name:"목재",id:6882301,categoryCode:90300},l={name:"부드러운 목재",id:6882304,categoryCode:90300},n={name:"아비도스 목재",id:6884308,categoryCode:90300},i={name:"아비도스 융화 재료",id:6861012,categoryCode:50010},c={name:"상급 아비도스 융화 재료",id:6861013,categoryCode:50010};function d({costReduction:e,setCostReduction:r,greatSuccessChance:a,setGreatSuccessChance:o,className:l="fixed top-6 left-6 z-50 flex flex-col items-start pointer-events-none",forceExpanded:n=!1}){let[i,c]=(0,s.useState)(!1),d=i||n;return(0,t.jsxs)("div",{className:l,children:[(0,t.jsx)("button",{onClick:()=>c(!i),disabled:n,className:`pointer-events-auto px-4 py-2 bg-black/60 hover:bg-black/80 backdrop-blur-md text-white/80 hover:text-white border border-white/10 rounded-lg text-sm font-bold transition-all shadow-lg ${n?"opacity-50 cursor-default":""}`,children:d?n?"필수 설정":"보너스 설정 닫기":"제작 보너스 설정"}),d&&(0,t.jsx)("div",{className:"pointer-events-auto mt-3 w-72 bg-[#0f111a]/95 backdrop-blur-xl border border-white/10 rounded-xl p-4 shadow-2xl animate-in fade-in slide-in-from-top-4 origin-top-left",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"제작 수수료 감소 (%)"}),(0,t.jsxs)("div",{className:"flex items-center bg-black/40 border border-white/10 rounded-lg px-3",children:[(0,t.jsx)("input",{type:"number",value:e??"",onChange:e=>r(""===e.target.value?null:Number(e.target.value)),className:"w-full bg-transparent py-2 text-sm text-white focus:outline-none",placeholder:"0"}),(0,t.jsx)("span",{className:"text-xs text-slate-500 font-bold ml-2",children:"%"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"대성공 확률 (%)"}),(0,t.jsxs)("div",{className:"flex items-center bg-black/40 border border-white/10 rounded-lg px-3",children:[(0,t.jsx)("input",{type:"number",value:a??"",onChange:e=>o(""===e.target.value?null:Number(e.target.value)),className:"w-full bg-transparent py-2 text-sm text-white focus:outline-none",placeholder:"0"}),(0,t.jsx)("span",{className:"text-xs text-slate-500 font-bold ml-2",children:"%"})]}),(0,t.jsxs)("p",{className:"text-[10px] text-slate-500 mt-1",children:["* 기본 5%에 ",a||0,"% 증폭 (최종 ",(.05*(1+(a||0)/100)*100).toFixed(2),"%)"]})]})]})})]})}function x({apiKey:e,setApiKey:r,fetchPrices:a,isLoading:o,logs:l,className:n="fixed top-6 right-6 z-50 flex flex-col items-end pointer-events-none",forceExpanded:i=!1}){let[c,d]=(0,s.useState)(!1),x=c||i;return(0,t.jsxs)("div",{className:n,children:[(0,t.jsx)("button",{onClick:()=>d(!c),disabled:i,className:`pointer-events-auto px-4 py-2 bg-black/60 hover:bg-black/80 backdrop-blur-md text-white/80 hover:text-white border border-white/10 rounded-lg text-sm font-bold transition-all shadow-lg ${i?"opacity-50 cursor-default":""}`,children:x?i?"필수 설정":"설정 닫기":"API 설정"}),x&&(0,t.jsx)("div",{className:"pointer-events-auto mt-3 w-80 bg-[#0f111a]/95 backdrop-blur-xl border border-white/10 rounded-xl p-4 shadow-2xl animate-in fade-in slide-in-from-top-4 origin-top-right",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Lost Ark API Key"}),(0,t.jsx)("input",{type:"password",value:e,onChange:e=>r(e.target.value),placeholder:"API Key 입력",className:"w-full bg-black/40 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-blue-500 outline-none transition-colors"})]}),(0,t.jsx)("button",{onClick:()=>a(e),disabled:o,className:"w-full py-2.5 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg transition-colors disabled:opacity-50",children:o?"시세 조회 중...":"시세 조회하기 (초기화)"}),(0,t.jsxs)("div",{className:"mt-2 pt-3 border-t border-white/10",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("h3",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"API 로그"}),o&&(0,t.jsx)("span",{className:"text-[10px] text-blue-400 font-bold animate-pulse",children:"조회 중..."})]}),(0,t.jsx)("div",{className:"h-48 overflow-y-auto bg-black/40 rounded-lg p-2 border border-white/5 custom-scrollbar",children:l.length>0?(0,t.jsx)("div",{className:"space-y-1.5",children:l.map((e,s)=>(0,t.jsx)("p",{className:"text-[11px] text-slate-400 font-mono leading-relaxed border-b border-white/5 pb-1 last:border-0",children:e},s))}):(0,t.jsx)("p",{className:"text-[11px] text-slate-600 text-center py-4",children:"로그 기록이 없습니다."})})]})]})})]})}function m({targetSlots:e,setTargetSlots:s,ownedRare:r,setOwnedRare:a,ownedUncommon:o,setOwnedUncommon:l,ownedCommon:n,setOwnedCommon:i,prices:c,bundleCounts:d}){return(0,t.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,t.jsxs)("div",{className:"bg-black/20 rounded-2xl p-5 border border-white/5",children:[(0,t.jsx)("label",{className:"block text-[11px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-1",children:"목표 제작 슬롯"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"number",value:e,onChange:e=>s(Number(e.target.value)),min:"1",className:"w-full bg-transparent text-4xl font-black text-white focus:outline-none placeholder-slate-700"}),(0,t.jsx)("span",{className:"text-base font-bold text-slate-500",children:"Slots"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end px-2",children:[(0,t.jsx)("label",{className:"text-[11px] font-bold text-slate-500 uppercase tracking-widest",children:"현재 보유량 (벌목 재료)"}),(0,t.jsx)("span",{className:"text-[10px] text-slate-600 font-medium",children:"인게임 보유량을 입력하세요"})]}),(0,t.jsxs)("div",{className:"bg-black/30 px-5 py-3.5 rounded-2xl border border-white/5 flex items-center justify-between group/item hover:border-blue-500/30 transition-colors",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-blue-400 w-16 group-hover/item:text-blue-300 transition-colors",children:"희귀"}),(0,t.jsx)("div",{className:"flex-1 flex flex-col items-end mr-4",children:(0,t.jsx)("input",{type:"number",value:r,onChange:e=>a(Number(e.target.value)),className:"w-full bg-transparent text-right font-bold text-xl outline-none text-slate-200 focus:text-white transition-colors placeholder-slate-700"})}),c.rare>0&&(0,t.jsxs)("div",{className:"text-right text-[10px] text-slate-500 w-24 border-l border-white/5 pl-4",children:[(0,t.jsxs)("span",{className:"block text-slate-400 font-mono",children:[c.rare," G"]}),(0,t.jsxs)("span",{className:"block text-[9px] uppercase",children:["Per ",d.rare]})]})]}),(0,t.jsxs)("div",{className:"bg-black/30 px-5 py-3.5 rounded-2xl border border-white/5 flex items-center justify-between group/item hover:border-emerald-500/30 transition-colors",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-emerald-400 w-16 group-hover/item:text-emerald-300 transition-colors",children:"고급"}),(0,t.jsx)("div",{className:"flex-1 flex flex-col items-end mr-4",children:(0,t.jsx)("input",{type:"number",value:o,onChange:e=>l(Number(e.target.value)),className:"w-full bg-transparent text-right font-bold text-xl outline-none text-slate-200 focus:text-white transition-colors placeholder-slate-700"})}),c.uncommon>0&&(0,t.jsxs)("div",{className:"text-right text-[10px] text-slate-500 w-24 border-l border-white/5 pl-4",children:[(0,t.jsxs)("span",{className:"block text-slate-400 font-mono",children:[c.uncommon," G"]}),(0,t.jsxs)("span",{className:"block text-[9px] uppercase",children:["Per ",d.uncommon]})]})]}),(0,t.jsxs)("div",{className:"bg-black/30 px-5 py-3.5 rounded-2xl border border-white/5 flex items-center justify-between group/item hover:border-slate-500/30 transition-colors",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-slate-200 w-16 group-hover/item:text-white transition-colors",children:"일반"}),(0,t.jsx)("div",{className:"flex-1 flex flex-col items-end mr-4",children:(0,t.jsx)("input",{type:"number",value:n,onChange:e=>i(Number(e.target.value)),className:"w-full bg-transparent text-right font-bold text-xl outline-none text-slate-200 focus:text-white transition-colors placeholder-slate-700"})}),c.common>0&&(0,t.jsxs)("div",{className:"text-right text-[10px] text-slate-500 w-24 border-l border-white/5 pl-4",children:[(0,t.jsxs)("span",{className:"block text-slate-400 font-mono",children:[c.common," G"]}),(0,t.jsxs)("span",{className:"block text-[9px] uppercase",children:["Per ",d.common]})]})]})]})]})}function u({profitStats:e}){return e?(0,t.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${e.sellingProfit>=0?"bg-emerald-500/5 border-emerald-500/20 hover:bg-emerald-500/10":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10"}`,children:[(0,t.jsx)("h4",{className:`text-center text-[10px] font-bold mb-3 uppercase tracking-widest ${e.sellingProfit>=0?"text-emerald-400":"text-red-400"}`,children:"판매 시 수익 (수수료 5%)"}),(0,t.jsxs)("div",{className:"bg-black/20 rounded-xl p-3 mb-3 space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs font-bold font-mono",children:[(0,t.jsx)("span",{className:"text-emerald-400/70 uppercase tracking-wider text-[10px]",children:"Revenue"}),(0,t.jsx)("span",{className:"text-white tracking-wide",children:Math.floor(e.sellingRevenue).toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs font-bold font-mono",children:[(0,t.jsx)("span",{className:"text-red-400/70 uppercase tracking-wider text-[10px]",children:"Cost"}),(0,t.jsxs)("span",{className:"text-red-200/80 tracking-wide",children:["-",Math.floor(e.totalCost).toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center pt-1",children:[(0,t.jsx)("span",{className:`text-[9px] font-extrabold mb-1 uppercase tracking-[0.2em] ${e.sellingProfit>=0?"text-emerald-600":"text-red-600"}`,children:"NET PROFIT"}),(0,t.jsxs)("span",{className:`text-3xl font-black tracking-tight ${e.sellingProfit>=0?"text-emerald-400":"text-red-400"}`,children:[e.sellingProfit>=0?"+":"",Math.floor(e.sellingProfit).toLocaleString()," ",(0,t.jsx)("span",{className:"text-sm font-bold opacity-50",children:"G"})]})]})]}),(0,t.jsxs)("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${e.usageProfit>=0?"bg-sky-500/5 border-sky-500/20 hover:bg-sky-500/10":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10"}`,children:[(0,t.jsx)("h4",{className:`text-center text-[10px] font-bold mb-3 uppercase tracking-widest ${e.usageProfit>=0?"text-sky-400":"text-red-400"}`,children:"본인 사용 이득"}),(0,t.jsxs)("div",{className:"bg-black/20 rounded-xl p-3 mb-3 space-y-1.5",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs font-bold font-mono",children:[(0,t.jsx)("span",{className:"text-sky-400/70 uppercase tracking-wider text-[10px]",children:"Value"}),(0,t.jsx)("span",{className:"text-white tracking-wide",children:Math.floor(e.grossRevenue).toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs font-bold font-mono",children:[(0,t.jsx)("span",{className:"text-red-400/70 uppercase tracking-wider text-[10px]",children:"Cost"}),(0,t.jsxs)("span",{className:"text-red-200/80 tracking-wide",children:["-",Math.floor(e.totalCost).toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center pt-1",children:[(0,t.jsx)("span",{className:`text-[9px] font-extrabold mb-1 uppercase tracking-[0.2em] ${e.usageProfit>=0?"text-sky-600":"text-red-600"}`,children:"SAVED"}),(0,t.jsxs)("span",{className:`text-3xl font-black tracking-tight ${e.usageProfit>=0?"text-sky-400":"text-red-400"}`,children:[e.usageProfit>=0?"+":"",Math.floor(e.usageProfit).toLocaleString()," ",(0,t.jsx)("span",{className:"text-sm font-bold opacity-50",children:"G"})]})]})]})]}):null}function p({activeTab:e,results:s,prices:r}){return(0,t.jsxs)("section",{className:"bg-white/[0.03] border border-white/5 rounded-[2rem] p-6 flex flex-col relative overflow-hidden",children:[(0,t.jsxs)("h2",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full"}),"구매 필요 횟수 (","abidos"===e?"아비도스":"상급 아비도스",")"]}),(0,t.jsx)("div",{className:"space-y-4 flex-1",children:[{key:"rare",label:n.name,color:"#3b82f6",bg:"bg-blue-500/10"},{key:"uncommon",label:l.name,color:"#10b981",bg:"bg-emerald-500/10"},{key:"common",label:o.name,color:"#f8fafc",bg:"bg-slate-500/10"}].map(({key:e,label:a,color:o,bg:l})=>{let n=s[e],i=(e=>{let t=s[e];if(t.buyCount<=0)return 0;let a=r[e];return t.buyCount*a})(e),c=n.buyCount<=0;return(0,t.jsxs)("div",{className:`group flex flex-col p-4 rounded-2xl transition-all duration-300 ${c?"bg-white/[0.02] border border-white/[0.02] opacity-50 hover:opacity-100":"bg-black/20 border border-white/5 hover:border-white/10"}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-bold tracking-tight",style:{color:o},children:a}),(0,t.jsx)("div",{className:`px-3 py-1 rounded-full text-[10px] font-bold ${c?"bg-emerald-500/20 text-emerald-400":"bg-amber-500/20 text-amber-400"}`,children:c?"보유량 충분":"구매 필요"})]}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2 mb-1",children:[(0,t.jsx)("span",{className:`text-4xl font-black tracking-tighter ${c?"text-slate-600":"text-white"}`,children:n.buyCount}),(0,t.jsxs)("span",{className:"text-xs font-bold text-slate-600 uppercase",children:["회 ",(0,t.jsxs)("span",{className:"text-slate-700 font-medium ml-0.5",children:["(",n.bundleSize," 단위)"]})]})]}),i>0&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-white/5 flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest",children:"Estimated Cost"}),(0,t.jsxs)("span",{className:"text-sm font-bold text-amber-500/90 font-mono",children:[i.toLocaleString()," ",(0,t.jsx)("span",{className:"text-[10px] text-amber-500/50",children:"G"})]})]})]},e)})})]})}let b={abidos:{rare:33,uncommon:45,common:86,gold:400},superior:{rare:43,uncommon:59,common:112,gold:520}};function h(){let[e,h]=(0,s.useState)("superior"),[f,g]=(0,s.useState)(1),[j,w]=(0,s.useState)(0),[y,v]=(0,s.useState)(0),[N,k]=(0,s.useState)(0),[C,S]=(0,s.useState)(""),[P,$]=(0,s.useState)({rare:0,uncommon:0,common:0,fusion:0,superiorFusion:0}),[z,R]=(0,s.useState)({rare:10,uncommon:10,common:10,fusion:10,superiorFusion:10}),[A,E]=(0,s.useState)(!1),[I,L]=(0,s.useState)([]),[M,T]=(0,s.useState)(null),[G,O]=(0,s.useState)(null),[F,B]=(0,s.useState)(null),[U,D]=(0,s.useState)(!1),[K,_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("matCalcData");if(e)try{let t=JSON.parse(e);g(Number(t.targetSlots)||1),w(Number(t.ownedRare)||0),v(Number(t.ownedUncommon)||0),k(Number(t.ownedCommon)||0),t.activeTab&&h(t.activeTab),t.apiKey&&S(t.apiKey),"number"==typeof t.costReduction&&T(t.costReduction),"number"==typeof t.greatSuccessChance&&O(t.greatSuccessChance)}catch(e){console.error(e)}D(!0)},[]),(0,s.useEffect)(()=>{localStorage.setItem("matCalcData",JSON.stringify({targetSlots:f,ownedRare:j,ownedUncommon:y,ownedCommon:N,activeTab:e,apiKey:C,costReduction:M,greatSuccessChance:G}))},[f,j,y,N,e,C,M,G]);let J=e=>{let t=new Date().toLocaleTimeString();L(s=>[`[${t}] ${e}`,...s])},W=(0,s.useCallback)(async e=>{if(e){E(!0),J("시세 자동 조회 시작...");try{let t=[{...n,key:"rare"},{...l,key:"uncommon"},{...o,key:"common"},{...i,key:"fusion"},{...c,key:"superiorFusion"}],s={},r={};for(let o of t){J(`[요청] ${o.name} (ID: ${o.id}, Cat: ${o.categoryCode})`);try{let t=await a.getMarketPrice(e,o.id,o.name,o.categoryCode);null!==t?(J(`[수신] ${o.name}: ${t.price}G / unit: ${t.bundleCount}`),s[o.key]=t.price,r[o.key]=t.bundleCount):J(`[실패] ${o.name}: 데이터 없음 (result is null)`)}catch(e){J(`[에러] ${o.name}: ${e.message}`)}}$(e=>({...e,...s})),R(e=>({...e,...r})),_(!0),J("시세 업데이트 완료")}catch(e){console.error(e),J(`전체 에러: ${e.message}`)}finally{E(!1)}}},[]),V=s.default.useRef(null);(0,s.useEffect)(()=>{if(!C)return;W(C);let e=new Date,t=setTimeout(()=>{W(C),V.current=setInterval(()=>{W(C)},6e4)},(60-e.getSeconds())*1e3-e.getMilliseconds());return()=>{clearTimeout(t),V.current&&clearInterval(V.current)}},[C,W]);let q=(0,s.useMemo)(()=>{let t=Math.max(0,f),s={rare:j,uncommon:y,common:N},r={},a=b[e];return["rare","uncommon","common"].forEach(e=>{let o=a[e]*t,l=o-s[e],n=z[e]||10,i=l<=0?0:Math.ceil(l/n);r[e]={buyCount:i,needed:o,bundleSize:n}}),r},[f,j,y,N,e,z]),H=(0,s.useMemo)(()=>{let t=Math.max(0,f);if(0===t)return null;let s=b[e],r="abidos"===e?"fusion":"superiorFusion",a=P[r];if(!a||0===P.rare||0===P.uncommon||0===P.common)return null;let o=0;["rare","uncommon","common"].forEach(e=>{let r=s[e]*t,a=P[e],l=z[e]||1;o+=a/l*r});let l=s.gold*t*(1-(M||0)/100),n=10*(1+.05*(1+(G||0)/100))*t,i=a/(z[r]||1)*n,c=o+l,d=.95*i;return{grossRevenue:i,sellingRevenue:d,matCost:o,goldCost:l,totalCost:c,sellingProfit:d-c,usageProfit:i-c,outputQty:n}},[f,e,P,z,M,G]),Q=async()=>{if(!("documentPictureInPicture"in window))return void alert("PiP 미지원");try{let e=await window.documentPictureInPicture.requestWindow({width:360,height:600});B(e);let t=document.createElement("style");t.textContent=`
        * { box-sizing: border-box; }
        body { background: #0f111a; color: white; font-family: 'Pretendard', sans-serif; padding: 12px 10px; margin: 0; overflow: hidden; }
        .container { display: flex; flex-direction: column; gap: 8px; }
        .tab-box { display: flex; background: #1a1d29; border-radius: 8px; padding: 2px; margin-bottom: 5px; }
        .tab-btn { flex: 1; padding: 6px; border: none; background: transparent; color: #64748b; font-size: 11px; font-weight: bold; cursor: pointer; border-radius: 6px; }
        .tab-btn.active { background: #334155; color: white; }
        .label { font-size: 11px; font-weight: bold; color: #475569; margin-bottom: 2px; display: block; }
        .input-row { display: flex; align-items: center; background: #1a1d29; border-radius: 8px; padding: 5px 10px; }
        .input-row span { font-size: 11px; font-weight: bold; width: 40px; }
        input { background: transparent; border: none; color: white; text-align: right; font-weight: 900; width: 100%; outline: none; font-size: 16px; }
        .res-box { margin-top: 5px; padding-top: 8px; border-top: 1px solid #334155; display: flex; flex-direction: column; gap: 4px; }
        .res-row { display: flex; justify-content: space-between; align-items: center; }
        .buy-val { color: #fbbf24; font-weight: 900; font-size: 20px; }
        .update-btn { width: 100%; padding: 10px; background: #2563eb; color: white; border: none; border-radius: 8px; font-weight: bold; margin-top: 8px; cursor: pointer; }
        .update-btn:active { background: #1d4ed8; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .price-tag { font-size: 10px; color: #94a3b8; margin-left: auto; }
        .profit-container { display: grid; grid-template-columns: 1fr; gap: 8px; margin-top: 10px; }
        .profit-box { background: #1e293b; border-radius: 8px; padding: 10px; text-align: center; border: 1px solid #334155; }
        .profit-label { font-size: 11px; color: #94a3b8; font-weight: bold; display: block; margin-bottom: 6px; }
        .profit-val { font-size: 24px; font-weight: 900; margin-top: 4px; line-height: 1; }
        .calc-row { display: flex; justify-content: center; align-items: center; gap: 8px; margin-bottom: 4px; }
        .calc-col { display: flex; flex-direction: column; align-items: center; }
        .calc-title { font-size: 9px; color: #64748b; font-weight: bold; margin-bottom: 2px; }
        .calc-col span:last-child { font-size: 13px; font-weight: bold; color: #e2e8f0; }
        .calc-sep { font-size: 12px; color: #475569; font-weight: bold; margin-top: 10px; }
        .val-plus { color: #34d399; }
        .val-minus { color: #f87171; }
      `,e.document.head.appendChild(t),e.addEventListener("pagehide",()=>{B(null)})}catch(e){console.error(e),alert("PiP 실행 실패")}},X=!!C&&null!==M&&null!==G;if(!U)return(0,t.jsx)("div",{className:"min-h-screen bg-[#0f111a]"});let Y=`fixed z-50 flex flex-col items-start transition-all duration-1000 ease-in-out pointer-events-none ${X?"top-6 left-6 scale-100":"top-1/2 left-1/2 -translate-x-1/2 -translate-y-[140%] md:-translate-y-1/2 md:-translate-x-[120%] scale-110"}`,Z=`fixed z-50 flex flex-col items-end transition-all duration-1000 ease-in-out pointer-events-none ${X?"top-6 right-6 scale-100":"top-1/2 left-1/2 -translate-x-1/2 translate-y-[40%] md:-translate-y-1/2 md:translate-x-[20%] scale-110"}`;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`fixed inset-0 bg-[#0f111a]/90 backdrop-blur-sm z-40 transition-opacity duration-1000 pointer-events-none ${X?"opacity-0":"opacity-100"}`}),(0,t.jsx)(d,{costReduction:M,setCostReduction:T,greatSuccessChance:G,setGreatSuccessChance:O,className:Y,forceExpanded:!X}),(0,t.jsx)(x,{apiKey:C,setApiKey:S,fetchPrices:W,isLoading:A,logs:I,className:Z,forceExpanded:!X}),(0,t.jsxs)("div",{className:`max-w-5xl w-full grid grid-cols-1 lg:grid-cols-2 gap-6 relative transition-opacity duration-1000 ${X&&K?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none h-0 overflow-hidden"}`,children:[(0,t.jsxs)("section",{className:"bg-[#1a1d29]/80 backdrop-blur-md border border-white/5 rounded-[2rem] p-6 shadow-2xl relative overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none"}),(0,t.jsxs)("header",{className:"mb-6 relative z-10",children:[(0,t.jsxs)("h1",{className:"text-2xl font-black tracking-tighter text-white mb-5 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-1.5 h-6 bg-blue-500 rounded-full inline-block"}),"재료 계산기"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-1 p-1 bg-black/40 rounded-xl border border-white/5 shadow-inner",children:[(0,t.jsxs)("button",{onClick:()=>h("abidos"),className:`py-2.5 rounded-lg text-sm font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 ${"abidos"===e?"bg-blue-600 text-white shadow-lg shadow-blue-900/20 scale-[1.02]":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:[(0,t.jsx)("span",{children:"아비도스"}),P.fusion>0&&(0,t.jsxs)("span",{className:"text-[10px] opacity-90 font-mono bg-black/20 px-2 py-0.5 rounded-full",children:[P.fusion," G"]})]}),(0,t.jsxs)("button",{onClick:()=>h("superior"),className:`py-2.5 rounded-lg text-sm font-bold transition-all duration-300 flex flex-col items-center justify-center gap-1 ${"superior"===e?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/20 scale-[1.02]":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:[(0,t.jsx)("span",{children:"상급 아비도스"}),P.superiorFusion>0&&(0,t.jsxs)("span",{className:"text-[10px] opacity-90 font-mono bg-black/20 px-2 py-0.5 rounded-full",children:[P.superiorFusion," G"]})]})]})]}),(0,t.jsx)(m,{targetSlots:f,setTargetSlots:g,ownedRare:j,setOwnedRare:w,ownedUncommon:y,setOwnedUncommon:v,ownedCommon:N,setOwnedCommon:k,prices:P,bundleCounts:z}),(0,t.jsxs)("div",{className:"pt-5 border-t border-white/5 mt-6",children:[(0,t.jsxs)("button",{onClick:Q,className:"w-full py-3.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white rounded-xl font-bold transition-all shadow-xl shadow-blue-900/20 active:scale-[0.98] flex items-center justify-center gap-2 group/btn",children:[(0,t.jsx)("span",{children:"오버레이 실행"}),(0,t.jsx)("svg",{className:"w-4 h-4 opacity-70 group-hover/btn:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 00-2 2h10a2 2 0 00-2-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),(0,t.jsx)(u,{profitStats:H})]})]}),(0,t.jsx)(p,{activeTab:e,results:q,prices:P})]}),F&&(0,r.createPortal)((0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:"tab-box",children:[(0,t.jsx)("button",{className:`tab-btn ${"abidos"===e?"active":""}`,onClick:()=>h("abidos"),children:"아비도스"}),(0,t.jsx)("button",{className:`tab-btn ${"superior"===e?"active":""}`,onClick:()=>h("superior"),children:"상급 아비도스"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"목표 슬롯"}),(0,t.jsx)("div",{className:"input-row",children:(0,t.jsx)("input",{type:"number",value:f,onChange:e=>g(Number(e.target.value))})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"보유량"}),(0,t.jsxs)("div",{className:"input-row",style:{marginBottom:4},children:[(0,t.jsx)("span",{style:{color:"#3b82f6"},children:"희귀"}),(0,t.jsx)("input",{type:"number",value:j,onChange:e=>w(Number(e.target.value))})]}),P.rare>0&&(0,t.jsxs)("div",{className:"price-tag",children:[P.rare," G"]}),(0,t.jsxs)("div",{className:"input-row",style:{marginBottom:4},children:[(0,t.jsx)("span",{style:{color:"#1eff00"},children:"고급"}),(0,t.jsx)("input",{type:"number",value:y,onChange:e=>v(Number(e.target.value))})]}),P.uncommon>0&&(0,t.jsxs)("div",{className:"price-tag",children:[P.uncommon," G"]}),(0,t.jsxs)("div",{className:"input-row",children:[(0,t.jsx)("span",{style:{color:"#ffffff"},children:"일반"}),(0,t.jsx)("input",{type:"number",value:N,onChange:e=>k(Number(e.target.value))})]}),P.common>0&&(0,t.jsxs)("div",{className:"price-tag",children:[P.common," G"]})]}),(0,t.jsx)("div",{className:"res-box",children:[{key:"rare",label:"희귀",color:"#3b82f6"},{key:"uncommon",label:"고급",color:"#1eff00"},{key:"common",label:"일반",color:"#ffffff"}].map(({key:e,label:s,color:r})=>{let a=q[e];return(0,t.jsxs)("div",{className:"res-row",children:[(0,t.jsx)("span",{style:{fontSize:13,fontWeight:"bold",color:r},children:s}),(0,t.jsx)("span",{className:"buy-val",children:a.buyCount>0?(0,t.jsxs)(t.Fragment,{children:[a.buyCount,(0,t.jsx)("span",{style:{fontSize:12,fontWeight:"normal",color:"#64748b"},children:"회"})]}):(0,t.jsx)("span",{style:{color:"#475569",fontSize:14},children:"충분"})})]},e)})}),H&&(0,t.jsx)("div",{className:"profit-container",children:(0,t.jsxs)("div",{className:"profit-box",style:{borderColor:H.sellingProfit>=0?"#34d39966":"#f8717166"},children:[(0,t.jsx)("span",{className:"profit-label",children:"판매 시 (수수료 5%)"}),(0,t.jsxs)("div",{className:"calc-row",children:[(0,t.jsx)("span",{style:{color:"#94a3b8"},children:"매출"}),Math.floor(H.sellingRevenue).toLocaleString(),(0,t.jsx)("span",{style:{color:"#64748b"},children:"-"}),(0,t.jsx)("span",{style:{color:"#94a3b8"},children:"비용"}),Math.floor(H.totalCost).toLocaleString()]}),(0,t.jsxs)("div",{className:`profit-val ${H.sellingProfit>=0?"val-plus":"val-minus"}`,children:[H.sellingProfit>=0?"+":"",Math.floor(H.sellingProfit).toLocaleString()]})]})}),(0,t.jsx)("button",{className:"update-btn",onClick:()=>{w(e=>{let t=q.rare;return e+t.buyCount*t.bundleSize-t.needed}),v(e=>{let t=q.uncommon;return e+t.buyCount*t.bundleSize-t.needed}),k(e=>{let t=q.common;return e+t.buyCount*t.bundleSize-t.needed})},children:"제작 완료 (보유량 업데이트)"})]}),F.document.body)]})}e.s(["default",()=>h],42416)}]);